{% extends '@TalavWeb/layouts/default.html.twig' %}

{%- block titre '' -%}
{% block title %}
    Utwórz galerie
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-md-8">

            <!-- Card feed item START -->
            <div class="card">
                <!-- Card header START -->
                <div class="card-header pb-0">
                    <h3 class="card-title h5">New Post</h3>
                </div>
                <!-- Card header START -->

                <!-- Card body START -->
                <div class="card-body">

                    <ul class="nav nav-divider align-items-center">
                        <li class="nav-item">
                            <div class="nav-link">
                                <div class="d-flex align-items-center">
                                    <!-- Avatar -->
                                    <div class="avatar avatar-sm">
{#                                        <span style="background-image: url('{% if post.author.profile.avatar != 'avatar.jpg' %}{{ vich_uploader_asset(post.author.profile) | imagine_filter('thumbnail') }}{% else %}{{ asset('assets/images/avatar.jpg') | imagine_filter('thumbnail') }}{% endif %}')"></span>#}
                                        <img class="avatar-img rounded-circle border border-1 border-secondary" src="{% if post.author.avatar %}{{ media_thumb_reference(post.author.avatar, 'square_small') }}{% else %}{{ asset('images/avatar.png') }}{% endif %}" alt="avatar">
                                    </div>
                                    <!-- Info -->
                                    <div class="ms-2">
                                        <h6 class="mb-0">
                                            <a href="#">{{ post.author.username }}</a>
                                            {% if post.author.verified %}
                                                <span class="md-comment-verified">
                                                    <i class="fas fa-check-circle text-info ms-1"></i>
                                                </span>
                                            {% endif %}
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item">
                            <span class="date">
                                {% if post.publishedAt | date('d') | slice(0,1) == 0 %}
                                    {{ post.publishedAt ? post.publishedAt | date('d') | replace({'0':''}) }}
                                {% else %}
                                    {{ post.publishedAt ? post.publishedAt | date('d') }}
                                {% endif %}

                                {{ ('month' ~ post.publishedAt | date("m")) | trans }}

                                {% if "now" | date("Y") != post.publishedAt | date('Y') %}
                                    {{ post.publishedAt ? post.publishedAt | date('Y') }}
                                {% endif %}

                                {{ post.publishedAt ? post.publishedAt | date(' H:i') }}
                            </span>
                        </li>
                    </ul>

                    <hr class="w-100">

                    {% if post.image %}

                        {% if '.gif' in post.image %}
                            {% set post_image_link = vich_uploader_asset(post) %}
                        {% else %}
                            {% set post_image_link = vich_uploader_asset(post) | imagine_filter('post') %}
                        {% endif %}

                        <div class="post-liker mb-3">
                            <img class="card-img" width="100%" src="{{ post_image_link }}" alt="{{ post.slug }}">
                        </div>

                        <div class="simple-editor-content">
                            {{ post.content | purify | raw }}
                        </div>

                        <ul class="nav nav-stack py-3 small">
                            <li class="nav-item">
                                <a class="nav-link active" href="#!"><i class="fas fa-thumbs-up pe-1"></i>Liked (56)</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#!"><i class="fas fa-comment pe-1"></i>Comments (12)</a>
                            </li>

                            <!-- Card share action START -->
                            <li class="nav-item dropdown ms-sm-auto">
                                <a class="nav-link mb-0" href="#" id="cardShareAction8" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-share pe-1"></i>Share (3)
                                </a>
                                <!-- Card share action dropdown menu -->
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="cardShareAction8">
                                    <li><a class="dropdown-item" href="#"> <i class="bi bi-envelope fa-fw pe-2"></i>Send via Direct Message</a></li>
                                    <li><a class="dropdown-item" href="#"> <i class="bi bi-bookmark-check fa-fw pe-2"></i>Bookmark </a></li>
                                    <li><a class="dropdown-item" href="#"> <i class="bi bi-link fa-fw pe-2"></i>Copy link to post</a></li>
                                    <li><a class="dropdown-item" href="#"> <i class="bi bi-share fa-fw pe-2"></i>Share post via …</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="#"> <i class="bi bi-pencil-square fa-fw pe-2"></i>Share to News Feed</a></li>
                                </ul>
                            </li>
                            <!-- Card share action END -->
                        </ul>

                    {% endif %}

                </div>
                <!-- Card body END -->

                <!-- Card Footer START -->
                                <div class="card-footer">
                                    ccc
                                </div>
                <!-- Card Footer END -->
            </div>
            <!-- Card feed item END -->

        </div>
        <div class="col-md-4">
            ccc
        </div>
    </div>
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{{ asset_css('css/simple_editor.css') }}
{% endblock %}

{% block javascripts %}
{% if app.debug %}
    {{ parent() }}
    {{- asset_js('js/vendor/jquery-validation/jquery.validate.js') }}
    {{- asset_js('js/vendor/jquery-validation/additional-methods.js') }}
    {{- asset_js('js/vendor/jquery-validation/localization/messages_fr.js') }}
    {{- asset_js('js/extensions/validator-extensions.js') }}
    {{- asset_js('js/extensions/validator-extensions-fr.js') -}}
    {{ asset_js('js/extensions/simple-editor-extension.js') }}
    {{ asset_js('js/application/user_post.js') }}
{% else %}
    {{- asset_js('js/core_edit.js') }}
    {{ asset_js('js/user_comment.js') }}
{% endif %}
{% endblock %}
